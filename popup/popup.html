<!DOCTYPE html>
<html>
<head>
    <title>Artha-Mitra Expert</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <!-- Header with Cloud Icon -->
    <div class="header-container">
        <h1>Artha-Mitra</h1>
        <svg id="cloudKeyIcon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></svg>
    </div>

    <input type="text" id="tickerInput" placeholder="Enter Ticker (e.g., AAPL)">
    <button id="analyzeButton">Analyze Stock </button>
    
    <div id="loading" style="display:none; color: orange;">
        <p>Running Valuation & AI Analysis...</p>
    </div>

    <div id="results" style="display:none;">
        <h2 id="stockHeader"></h2>
        <p id="priceInfo"></p>
        <p>DCF Price Targets:</p>
        <ul id="dcfTargets"></ul>
        
        <button id="toggleDetails" class="prompt-button">Show Background & AI Analysis</button>
        
        <div id="detailsSection" style="display:none; margin-top: 10px; border-top: 1px solid #eee;">
            <h3 id="aiAnalysisHeader">AI Analysis</h3>
            
            <h4>Leadership Analysis</h4>
            <p id="leadershipSummary"></p>

            <h4>Strategy & Bullish Scenario</h4>
            <pre id="strategyOutput"></pre>
            <pre id="bullishScenario"></pre>
            
            <button class="prompt-button" onclick="alert('Re-check Numbers function would trigger a content script (content.js) to scrape live L2 data.')">Re-check Numbers (L2 Data)</button>
        </div>
    </div>

    <!-- API Key Modal (hidden by default) -->
    <div id="apiKeyModal" class="modal-container">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h4>Hybrid AI Setup (API Key)</h4>
            <p>Enter your Gemini Cloud API key to enable the most powerful analysis models.</p>
            <input type="password" id="geminiApiKeyInput" placeholder="Enter Gemini Cloud API Key">
            <button id="saveApiKeyButton" class="prompt-button" style="background-color: #007bff; margin-top: 5px;">Save Key</button>
            <p id="keyStatus" style="font-size: 0.8em; margin-top: 5px;"></p>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>

